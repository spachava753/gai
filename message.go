package gai

import "io"

// Role represents what type a Message is
type Role uint

const (
	// User represents the user role in a list of messages
	User Role = iota

	// Assistant represents the assistant role in a list of messages.
	// A Message that has an Assistant role does not necessarily mean
	// that the Message was "generated" by the model. In particular, a tool
	// result message is also represented with an Assistant role, even
	// though the content of a Message that is a tool result would be the
	// result of a tool execution
	Assistant
)

// Modality represents the type of modality that a Block holds
// The default for Modality is a Text type
type Modality uint

const (
	Text Modality = iota
	Image
	Audio
	Video
)

// BlockType represents what type a Block is. A Block can hold some content,
// be a tool call, or hold the results of a tool execution
type BlockType uint

const (
	Content BlockType = iota
	ToolCall
	ToolResult
)

// Block represents a self-contained piece of a Message, meant to represent a "part" of a message.
// For example, if a message returned by a model contains audio and a tool call, the audio would
// be represented as one block, and the tool call another. Another example is if there are multiple
// tool calls in a response generated by a model, each tool call would be represented by single Block.
type Block struct {
	// ID is optional, it is commonly set when for ToolCall and ToolResult Block types,
	// and sometimes for Content type blocks. An empty string means that the ID field
	// is not set
	ID string

	// BlockType is required, and if not set explicit, the default value is of type Content.
	// - A Content BlockType represents "unstructured" content of single Modality
	// - A ToolCall BlockType represents a tool call by the model
	// - A ToolResult BlockType represents a tool result from the execution of a tool call
	BlockType BlockType

	// ModalityType represents the Modality of the content
	ModalityType Modality

	// Content is set when Modality is set to Text.
	// If Content not an empty string, Media must be nil
	Content string

	// Media is set when Modality is set to Image, Audio, or Video.
	// If Media is set to valid io.Reader, then Content must be an empty string
	Media io.Reader
}

// Message represents a collection of blocks produced by the user or meant for the assistant.
type Message struct {
	// Role is required, and the default value of Role is User. However, for readability purposes,
	// it is recommended to always set the Role to User or Assistant and not rely on the zero value
	// to make it clear to the reader what type of Message it is
	Role Role

	// Blocks represents the collection of different blocks produced by the User or Assistant
	Blocks []Block
}

// Dialog represents a dialog between a User and Assistant
type Dialog []Message
